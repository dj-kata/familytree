<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Family Tree</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        #family-chart {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: auto;
        }
        
        .controls {
            margin-bottom: 20px;
            text-align: center;
        }
        
        button {
            background: #4CAF50;
            border: none;
            color: white;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background: #45a049;
        }
        
        /* Family Chart Node Styling */
        .f3-node {
            cursor: pointer;
        }
        
        .f3-node-card {
            fill: #fff;
            stroke: #ccc;
            stroke-width: 1px;
            rx: 5;
        }
        
        .f3-node-card-male {
            fill: #e3f2fd;
            stroke: #1976d2;
        }
        
        .f3-node-card-female {
            fill: #fce4ec;
            stroke: #c2185b;
        }
        
        .f3-node-text-name {
            font-weight: bold;
            font-size: 14px;
            fill: #333;
        }
        
        .f3-node-text-data {
            font-size: 12px;
            fill: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“‹ æˆ‘ãŒå®¶ã®å®¶ç³»å›³</h1>
        
        <div class="controls">
            <button onclick="chart.fit()">å…¨ä½“è¡¨ç¤º</button>
            <button onclick="chart.fullscreen()">ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³</button>
        </div>
        
        <div id="family-chart"></div>
    </div>

    <!-- Family Chart Library -->
    <script src="https://unpkg.com/family-chart@latest"></script>
    
    <script>
        // å®¶æ—ãƒ‡ãƒ¼ã‚¿ã®å®šç¾©ï¼ˆã“ã“ã‚’ç·¨é›†ã—ã¦ã‚ãªãŸã®å®¶ç³»å›³ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼‰
        const familyData = [
            // ç¥–çˆ¶æ¯ä¸–ä»£
            {
                id: 'grandfather_p',
                data: {
                    first_name: 'å¤ªéƒ',
                    last_name: 'ç”°ä¸­',
                    birthday: '1925-03-15',
                    avatar: '', // å†™çœŸã®URLãŒã‚ã‚Œã°è¨­å®š
                    gender: 'M'
                }
            },
            {
                id: 'grandmother_p',
                data: {
                    first_name: 'èŠ±å­',
                    last_name: 'ç”°ä¸­',
                    birthday: '1928-08-22',
                    avatar: '',
                    gender: 'F'
                },
                rels: {
                    spouses: ['grandfather_p']
                }
            },
            
            // æ¯æ–¹ç¥–çˆ¶æ¯
            {
                id: 'grandfather_m',
                data: {
                    first_name: 'æ¬¡éƒ',
                    last_name: 'ä½è—¤',
                    birthday: '1923-12-10',
                    avatar: '',
                    gender: 'M'
                }
            },
            {
                id: 'grandmother_m',
                data: {
                    first_name: 'ç¾å­',
                    last_name: 'ä½è—¤',
                    birthday: '1926-05-18',
                    avatar: '',
                    gender: 'F'
                },
                rels: {
                    spouses: ['grandfather_m']
                }
            },
            
            // ä¸¡è¦ªä¸–ä»£
            {
                id: 'father',
                data: {
                    first_name: 'ä¸€éƒ',
                    last_name: 'ç”°ä¸­',
                    birthday: '1955-07-03',
                    avatar: '',
                    gender: 'M'
                },
                rels: {
                    father: 'grandfather_p',
                    mother: 'grandmother_p'
                }
            },
            {
                id: 'mother',
                data: {
                    first_name: 'å¹¸å­',
                    last_name: 'ç”°ä¸­',
                    birthday: '1958-11-25',
                    avatar: '',
                    gender: 'F'
                },
                rels: {
                    spouses: ['father'],
                    father: 'grandfather_m',
                    mother: 'grandmother_m'
                }
            },
            
            // å­ä¸–ä»£
            {
                id: 'self',
                data: {
                    first_name: 'ã‚ãªãŸ',
                    last_name: 'ç”°ä¸­',
                    birthday: '1985-04-12',
                    avatar: '',
                    gender: 'M' // ã‚ãªãŸã®æ€§åˆ¥ã«å¿œã˜ã¦'F'ã«å¤‰æ›´
                },
                rels: {
                    father: 'father',
                    mother: 'mother'
                }
            },
            {
                id: 'sibling',
                data: {
                    first_name: 'å¦¹/å¼Ÿ',
                    last_name: 'ç”°ä¸­',
                    birthday: '1987-09-30',
                    avatar: '',
                    gender: 'F'
                },
                rels: {
                    father: 'father',
                    mother: 'mother'
                }
            }
        ];

        // Family Chartã®åˆæœŸåŒ–
        const chart = FamilyChart.createTree('#family-chart', {
            data: familyData,
            nodeBinding: {
                field_0: 'first_name',
                field_1: 'last_name',
                field_2: 'birthday',
                img_0: 'avatar'
            },
            cardTemplate: {
                cardSize: [150, 100],
                // ãƒãƒ¼ãƒ‰ã®è¡¨ç¤ºã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
                nodeUpdate: function(node, person) {
                    const card = node.select('.f3-node-card');
                    
                    if (person.data.gender === 'M') {
                        card.classed('f3-node-card-male', true);
                    } else if (person.data.gender === 'F') {
                        card.classed('f3-node-card-female', true);
                    }
                }
            },
            // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­å®š
            fit: true,
            zoom: true,
            // åˆæœŸè¡¨ç¤ºè¨­å®š
            initial: {
                x: 0,
                y: 0,
                k: 0.8
            }
        });

        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºå¤‰æ›´æ™‚ã®å¯¾å¿œ
        window.addEventListener('resize', function() {
            chart.updateSize();
        });

        // å®¶æ—ãƒ¡ãƒ³ãƒãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆ
        chart.onNodeClick = function(person) {
            alert(`${person.data.first_name} ${person.data.last_name}\nç”Ÿå¹´æœˆæ—¥: ${person.data.birthday}`);
        };

        console.log('Family chart initialized successfully!');
    </script>
</body>
</html>
